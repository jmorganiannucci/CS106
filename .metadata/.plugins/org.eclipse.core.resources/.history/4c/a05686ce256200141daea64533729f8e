import java.io.*;
import java.util.*;

public class Team {
	String name;
	Boat[] boats;
	int boatsSize;
	
	Boat bestAveTime = null;
	Boat worstAveTime = null;
	
	Boat bestPR = null;
	Boat worstPR = null;
	
	
	public void readInData(){
		try {
			Scanner fileReader = new Scanner(new File("src/input.txt"));
			int boatCounter = 0;
			int numRaces = 0;
			String skip;
			while (fileReader.hasNext()) {
				String token = fileReader.next();
				
				if(token.equals("Team:")){
					name = fileReader.next();
				}
				if(token.equals("NumBoats:")){
					int numBoats = Integer.parseInt(fileReader.next());
					boats = new Boat[numBoats];
				}
				if(token.equals("NumRaces:")){
					numRaces = Integer.parseInt(fileReader.next());
				}
				if(token.equals("Boat")){
					skip = fileReader.next();	//skip the number of the boat
					Boat temp = new Boat();
					temp.raceTimesSize = numRaces;
					temp.raceTimes = new Time[numRaces];
					temp.boatNumber = boatCounter+1;
					for(int i = 0; i < numRaces; i++){
						
						skip = fileReader.next();	//skip "Race"
						skip = fileReader.next();	//skip race number
						String raceTime = fileReader.next();
						int mins = Integer.parseInt(raceTime.split(":")[0]);
						int secs = Integer.parseInt(raceTime.split(":")[1]);
						temp.raceTimes[i] = new Time(mins, secs);
					}
					boats[boatCounter] = temp;
					
					boatCounter++;
				}
				
				
			}
		boatsSize = boatCounter;
		
		
		
		
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		
	}
	
	public void print(){
		for(int i = 0; i < boatsSize; i++){
			boats[i].print();	
		}
		
	}
	
	
	public void parse(){
		//compute all averages
		for(int i = 0; i < boatsSize;i++){
			int totalTime = 0;
			//loop through all races of a boat
			for(int j = 0; j < boats[i].raceTimesSize; j++){
				totalTime += boats[i].raceTimes[j].totalTimeSec();
			}
			Time ave = new Time(totalTime/boats[i].raceTimesSize);
			boats[i].aveTime = ave;
		}
		
		int max = -999999;
		int min = 999999;
		
		int maxIndex = -1;
		int minIndex = -1;
		
		for(int i = 0; i < boatsSize; i++){
			if(max < boats[i].aveTime.totalTimeSec()){
				max = boats[i].aveTime.totalTimeSec();
				maxIndex = i;
			}
			if(min > boats[i].aveTime.totalTimeSec()){
				min = boats[i].aveTime.totalTimeSec();
				minIndex = i;
			}
		}
		
		bestAveTime = boats[minIndex];
		worstAveTime = boats[maxIndex];
		
		
	}
	
	public void printOutAnalysis(){
		System.out.println("Best Average Time:");
		System.out.println("\t")
		bestAveTime.print();
		System.out.print("With an Average Time of ");
		bestAveTime.aveTime.print();
		System.out.println();
		
		System.out.println("Best Personal Record:");
		bestPR.print();
		System.out.print("With a record of ");
		bestPR.PR.print();
		System.out.println();
		
		
		
		
		
		System.out.println("Worst Average Time:");
		worstAveTime.print();
		System.out.print("With an Average Time of ");
		worstAveTime.aveTime.print();
		System.out.println();
		
		System.out.println("Worst Personal Record:");
		worstPR.print();
		System.out.print("With a record of ");
		worstPR.PR.print();
		System.out.println();
		
		
	}
	
	public Team(){
		
	}
}
